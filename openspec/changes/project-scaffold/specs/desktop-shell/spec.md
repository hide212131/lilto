## ADDED Requirements

### Requirement: システムトレイへの常駐
アプリケーションは起動後、システムトレイ（macOS: メニューバー、Windows: タスクバー通知領域）にアイコンを表示し、バックグラウンドで動作し続けなければならない（SHALL）。メインウィンドウを閉じてもアプリは終了せず、トレイに残ること。

#### Scenario: 起動時のトレイ表示
- **WHEN** アプリケーションが起動する
- **THEN** システムトレイにアイコンが表示され、アプリがバックグラウンドで動作中であることがわかる

#### Scenario: ウィンドウを閉じてもアプリが継続
- **WHEN** ユーザーがメインウィンドウの閉じるボタンをクリックする
- **THEN** ウィンドウは非表示になるが、アプリはトレイに残り動作を継続する

### Requirement: トレイメニューの操作
トレイアイコンを右クリック（または左クリック）すると、コンテキストメニューが表示されなければならない（SHALL）。メニューには最低限「表示/非表示」と「終了」の項目を持つこと。

#### Scenario: トレイアイコンのクリック
- **WHEN** ユーザーがトレイアイコンをクリックする
- **THEN** コンテキストメニューが表示され、「表示/非表示」と「終了」の選択肢が現れる

#### Scenario: 「終了」の選択
- **WHEN** ユーザーがメニューから「終了」を選択する
- **THEN** アプリケーションが完全に終了する

#### Scenario: 「表示/非表示」の選択
- **WHEN** ユーザーがメニューから「表示/非表示」を選択する
- **THEN** メインウィンドウの表示状態が切り替わる

### Requirement: メインウィンドウの管理
メインウィンドウはアプリの主要なインタラクション画面として機能し、表示・非表示を切り替え可能でなければならない（SHALL）。

#### Scenario: 初回起動時のウィンドウ表示
- **WHEN** アプリケーションが初めて起動する
- **THEN** メインウィンドウが画面中央付近に表示される

#### Scenario: ウィンドウの最小化
- **WHEN** ユーザーがウィンドウを最小化する
- **THEN** ウィンドウはタスクバー/Dockには表示されず、トレイに格納される

### Requirement: アプリケーションのライフサイクル管理
アプリケーションは正常な起動・動作・終了のライフサイクルを管理しなければならない（SHALL）。終了時にはリソースを適切に解放すること。

#### Scenario: アプリの正常終了
- **WHEN** アプリケーションが終了命令を受ける
- **THEN** 開いているリソースをクリーンアップし、プロセスが完全に終了する
